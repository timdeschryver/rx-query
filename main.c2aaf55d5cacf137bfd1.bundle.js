(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{155:function(module,__webpack_exports__,__webpack_require__){"use strict";function generateTodoId(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(c){const r=16*Math.random()|0;return("x"==c?r:3&r|8).toString(16)}))}__webpack_require__.d(__webpack_exports__,"a",(function(){return generateTodoId}))},366:function(module,exports){function webpackEmptyAsyncContext(req){return Promise.resolve().then((function(){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}))}webpackEmptyAsyncContext.keys=function(){return[]},webpackEmptyAsyncContext.resolve=webpackEmptyAsyncContext,module.exports=webpackEmptyAsyncContext,webpackEmptyAsyncContext.id=366},386:function(module,exports,__webpack_require__){__webpack_require__(387),__webpack_require__(541),__webpack_require__(542),__webpack_require__(544),module.exports=__webpack_require__(767)},454:function(module,exports){},542:function(module,exports,__webpack_require__){(function(global){if(void 0===global.process){const{worker:worker}=__webpack_require__(772);location.origin.includes("localhost:6006")?worker.start():worker.start({serviceWorker:{url:"/rx-query/assets/mockServiceWorker.js"}})}}).call(this,__webpack_require__(38))},544:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),function(module){var _storybook_angular__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(196);module._StorybookPreserveDecorators=!0,Object(_storybook_angular__WEBPACK_IMPORTED_MODULE_0__.configure)([__webpack_require__(766)],module)}.call(this,__webpack_require__(545)(module))},766:function(module,exports,__webpack_require__){var map={"./stories/rx-query.stories.ts":771};function webpackContext(req){var id=webpackContextResolve(req);return __webpack_require__(id)}function webpackContextResolve(req){if(!__webpack_require__.o(map,req)){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}return map[req]}webpackContext.keys=function webpackContextKeys(){return Object.keys(map)},webpackContext.resolve=webpackContextResolve,module.exports=webpackContext,webpackContext.id=766},767:function(module,exports,__webpack_require__){var api=__webpack_require__(768),content=__webpack_require__(769);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},769:function(module,exports,__webpack_require__){(exports=__webpack_require__(770)(!1)).push([module.i,"/* You can add global styles to this file, and also import other style files */\n",""]),module.exports=exports},771:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"Basic",(function(){return Basic})),__webpack_require__.d(__webpack_exports__,"RefreshOnInterval",(function(){return RefreshOnInterval})),__webpack_require__.d(__webpack_exports__,"RefreshOnFocus",(function(){return RefreshOnFocus})),__webpack_require__.d(__webpack_exports__,"MultipleSubscribers",(function(){return MultipleSubscribers})),__webpack_require__.d(__webpack_exports__,"Error",(function(){return Error})),__webpack_require__.d(__webpack_exports__,"TypeAhead",(function(){return TypeAhead})),__webpack_require__.d(__webpack_exports__,"Prefetch",(function(){return Prefetch})),__webpack_require__.d(__webpack_exports__,"Mutate",(function(){return Mutate})),__webpack_require__.d(__webpack_exports__,"Pagination",(function(){return Pagination})),__webpack_require__.d(__webpack_exports__,"Todos",(function(){return Todos}));var common=__webpack_require__(9),fesm2015_http=__webpack_require__(14),fesm2015_forms=__webpack_require__(92),client=__webpack_require__(196),tslib_es6=__webpack_require__(12),core=__webpack_require__(0),map=__webpack_require__(17),of=__webpack_require__(77),isObservable=__webpack_require__(367),defer=__webpack_require__(130),timer=__webpack_require__(192),empty=__webpack_require__(26),scheduled=__webpack_require__(194),scheduler_async=__webpack_require__(16),observable_interval=__webpack_require__(369),never=__webpack_require__(184),fromEvent=__webpack_require__(368),catchError=__webpack_require__(370),take=__webpack_require__(132),startWith=__webpack_require__(380),expand=__webpack_require__(373),concatMap=__webpack_require__(154),debounce=__webpack_require__(371),mergeAll=__webpack_require__(125),withLatestFrom=__webpack_require__(383),filter=__webpack_require__(37),distinctUntilChanged=__webpack_require__(193),finalize=__webpack_require__(374),pairwise=__webpack_require__(378),shareReplay=__webpack_require__(379),Subject=__webpack_require__(13),asap=__webpack_require__(136),tap=__webpack_require__(382),groupBy=__webpack_require__(183),takeUntil=__webpack_require__(381),scan=__webpack_require__(106),switchMap=__webpack_require__(107),ignoreElements=__webpack_require__(375),observeOn=__webpack_require__(188),mergeScan=__webpack_require__(377),concatAll=__webpack_require__(190);const NOOP_MUTATE="RX_QUERY_NOOP_MUTATE";let cacheKeys=[];const revalidate=new Subject.a,queryCache=revalidate.pipe(Object(tap.a)(r=>{r.key&&"group-remove"===r.trigger?cacheKeys=cacheKeys.filter(key=>key!==r.key):r.key?cacheKeys.includes(r.key)||cacheKeys.push(r.key):"reset-cache"===r.trigger&&cacheKeys.forEach(key=>revalidate.next({key:key,trigger:"group-remove"}))}),Object(filter.a)(r=>void 0!==r.key),Object(groupBy.b)(r=>r.key,r=>r,group=>group.pipe(Object(takeUntil.a)(group.pipe(Object(scan.a)((acc,revalidator)=>void 0===acc.initialConfig?{initialConfig:revalidator.config,revalidator:revalidator}:{...acc,revalidator:revalidator},{}),Object(switchMap.a)(g=>{var _a,_b,_c,_d;switch(g.revalidator.trigger){case"group-remove":return Object(of.a)(g.revalidator);case"group-unsubscribe":const cacheTime=null!==(_d=null!==(_b=null===(_a=g.revalidator.config)||void 0===_a?void 0:_a.cacheTime)&&void 0!==_b?_b:null===(_c=g.initialConfig)||void 0===_c?void 0:_c.cacheTime)&&void 0!==_d?_d:0;return Object(timer.a)(cacheTime).pipe(Object(tap.a)(()=>{revalidate.next({...g.revalidator,trigger:"group-remove"})}));default:return empty.a}}))),Object(ignoreElements.a)())),Object(map.a)(group=>group.pipe(Object(observeOn.b)(asap.a),Object(scan.a)((subscriptions,revalidator)=>function holdSubscriptionsCount(subscriptions,revalidator){let{trigger:trigger}=revalidator;0==subscriptions.subscriptions&&["interval","focus","reconnect"].includes(trigger)&&(trigger="query-subscribe");return subscriptions.revalidator={...subscriptions.revalidator,...revalidator},subscriptions.subscriptions+={"query-subscribe":1,"query-unsubscribe":-1}[trigger]||0,subscriptions.subscriptions=Math.max(subscriptions.subscriptions,0),subscriptions}(subscriptions,revalidator),{subscriptions:0}),function unsubscribeOnNoSubscriptions(){return source=>source.pipe(Object(tap.a)(group=>{0!==group.subscriptions||["group-remove","group-unsubscribe"].includes(group.revalidator.trigger)||revalidate.next({...group.revalidator,trigger:"group-unsubscribe"})}))}(),Object(mergeScan.a)(({groupState:groupState},{revalidator:revalidator,subscriptions:subscriptions})=>{const queryConfig={...groupState.queryConfig,...revalidator.config},defaultHandlers={"query-subscribe":()=>cache_invokeQuery(groupState,revalidator,queryConfig,subscriptions,group),focus:()=>cache_invokeQuery(groupState,revalidator,queryConfig,subscriptions,group),reconnect:()=>cache_invokeQuery(groupState,revalidator,queryConfig,subscriptions,group),interval:()=>cache_invokeQuery(groupState,revalidator,queryConfig,subscriptions,group),manual:()=>cache_invokeQuery(groupState,revalidator,queryConfig,subscriptions,group),"group-unsubscribe":()=>updateTrigger(groupState,revalidator,queryConfig),"query-unsubscribe":()=>updateSubscriptions(groupState,revalidator,queryConfig,subscriptions),"group-remove":()=>updateSubscriptions(groupState,revalidator,queryConfig,subscriptions),"mutate-optimistic":()=>startMutation(groupState,revalidator,queryConfig),"mutate-success":()=>function mutationCommit(groupState,revalidator,queryConfig){return guardAgainstUnknownState(groupState,()=>{let newData=groupState.result.data;if(revalidator.data!==NOOP_MUTATE)if("function"==typeof revalidator.data){const fnResult=revalidator.data(groupState.result.data);newData=fnResult===NOOP_MUTATE?newData:fnResult}else newData=revalidator.data;const newResult={...groupState.result,data:newData,status:"success"};return Object(of.a)({groupState:{...groupState,queryConfig:queryConfig,result:newResult,originalResultData:void 0},trigger:revalidator.trigger})})}(groupState,revalidator,queryConfig),"mutate-error":()=>updateTrigger(groupState,revalidator,queryConfig)},handler={idle:{...defaultHandlers},success:{...defaultHandlers},error:{...defaultHandlers},loading:{...defaultHandlers,"group-unsubscribe":()=>resetGroupStatus(groupState,revalidator,queryConfig),"query-subscribe":()=>updateSubscriptions(groupState,revalidator,queryConfig,subscriptions),interval:()=>updateSubscriptions(groupState,revalidator,queryConfig,subscriptions),focus:()=>updateSubscriptions(groupState,revalidator,queryConfig,subscriptions),manual:()=>updateSubscriptions(groupState,revalidator,queryConfig,subscriptions)},refreshing:{...defaultHandlers,"group-unsubscribe":()=>resetGroupStatus(groupState,revalidator,queryConfig),"query-subscribe":()=>updateSubscriptions(groupState,revalidator,queryConfig,subscriptions),interval:()=>updateSubscriptions(groupState,revalidator,queryConfig,subscriptions),focus:()=>updateSubscriptions(groupState,revalidator,queryConfig,subscriptions),manual:()=>updateSubscriptions(groupState,revalidator,queryConfig,subscriptions)},mutating:{...defaultHandlers,"query-subscribe":()=>updateSubscriptions(groupState,revalidator,queryConfig,subscriptions),interval:()=>updateSubscriptions(groupState,revalidator,queryConfig,subscriptions),focus:()=>updateSubscriptions(groupState,revalidator,queryConfig,subscriptions),manual:()=>cache_invokeQuery(groupState,revalidator,queryConfig,subscriptions,group),"mutate-optimistic":()=>startMutation(groupState,revalidator,queryConfig),"mutate-error":()=>function mutationRollback(groupState,revalidator,queryConfig){return guardAgainstUnknownState(groupState,()=>{const newResult={...groupState.result,data:groupState.originalResultData,error:revalidator.data,status:"mutate-error"};return Object(of.a)({groupState:{...groupState,queryConfig:queryConfig,result:newResult},trigger:revalidator.trigger})})}(groupState,revalidator,queryConfig)},"mutate-error":{...defaultHandlers}}[groupState.result.status][revalidator.trigger];return handler?handler():(console.warn("[rx-query] Handler not found",{current:groupState.result.status,event:revalidator.trigger}),updateTrigger(groupState,revalidator,queryConfig))},{groupState:{key:"__rx-query-unknown",staleAt:void 0,subscriptions:0,queryConfig:void 0,result:{status:"idle"}},trigger:"initial"}))),Object(mergeAll.a)(),Object(scan.a)((_cache,{groupState:groupState,trigger:trigger})=>function updateCache(trigger,groupState,_cache){var _a,_b;switch(trigger){case"group-remove":const{[groupState.key]:_removeGroupKey,...remainingCacheRemove}=_cache;return remainingCacheRemove;case"group-unsubscribe":const{[groupState.key]:removeGroupKey,...remainingCacheUnsubscribe}=_cache;return void 0===(null==removeGroupKey?void 0:removeGroupKey.groupState.result.data)?remainingCacheUnsubscribe:{..._cache,[groupState.key]:{groupState:{...groupState,subscriptions:0},trigger:trigger}};default:return{..._cache,[groupState.key]:{groupState:{...groupState,subscriptions:void 0===groupState.subscriptions?null!==(_b=null===(_a=_cache[groupState.key])||void 0===_a?void 0:_a.groupState.subscriptions)&&void 0!==_b?_b:0:groupState.subscriptions},trigger:trigger}}}}(trigger,groupState,_cache),{}),Object(shareReplay.a)({refCount:!1,bufferSize:1}));function cache_invokeQuery(groupState,revalidator,queryConfig,subscriptions,group){if("manual"!==revalidator.trigger&&groupState.staleAt&&groupState.staleAt>Date.now()){const cached={...groupState,queryConfig:queryConfig,subscriptions:subscriptions,result:{...groupState.result,status:"success"}};return Object(of.a)({groupState:cached,trigger:revalidator.trigger})}if(!revalidator.query)return console.warn("[rx-query] Revalidator should have a query",{key:revalidator.key,trigger:revalidator.trigger}),Object(of.a)({groupState:groupState,trigger:revalidator.trigger});const hasCache=!!groupState.staleAt,intialState=hasCache?"refreshing":"loading",invoker=revalidator.query(intialState,revalidator.params).pipe(Object(takeUntil.a)(group.pipe(Object(filter.a)(r=>"group-unsubscribe"===r.trigger||"group-remove"===r.trigger||"mutate-optimistic"===r.trigger))),Object(map.a)(queryResult=>{const now=Date.now();return{key:revalidator.key,result:queryResult,queryConfig:queryConfig,staleAt:"success"===queryResult.status?now+queryConfig.staleTime:void 0,removeCacheAt:"success"===queryResult.status?now+queryConfig.cacheTime:void 0,originalResultData:void 0,subscriptions:void 0}})),initial={key:revalidator.key,queryConfig:queryConfig,result:{status:intialState,...hasCache?{data:groupState.result.data}:{},mutate:groupState.result.mutate,retries:0},staleAt:groupState.staleAt,subscriptions:subscriptions};return Object(scheduled.a)([Object(of.a)(initial),invoker],asap.a).pipe(Object(concatAll.a)(),Object(map.a)(r=>({groupState:r,trigger:revalidator.trigger})))}function startMutation(groupState,revalidator,queryConfig){return guardAgainstUnknownState(groupState,()=>{let newData=groupState.result.data;if(revalidator.data!==NOOP_MUTATE)if("function"==typeof revalidator.data){const fnResult=revalidator.data(groupState.result.data);newData=fnResult===NOOP_MUTATE?newData:fnResult}else newData=revalidator.data;const newResult={...groupState.result,data:newData,status:"mutating"};return Object(of.a)({groupState:{...groupState,queryConfig:queryConfig,result:newResult,originalResultData:groupState.result.data},trigger:revalidator.trigger})})}function updateSubscriptions(groupState,revalidator,queryConfig,subscriptions){return guardAgainstUnknownState(groupState,()=>groupState.subscriptions===subscriptions?updateTrigger(groupState,revalidator,queryConfig):Object(of.a)({groupState:{...groupState,queryConfig:queryConfig,subscriptions:subscriptions},trigger:revalidator.trigger}))}function resetGroupStatus(groupState,revalidator,queryConfig){return guardAgainstUnknownState(groupState,()=>Object(of.a)({groupState:{...groupState,queryConfig:queryConfig,result:{...groupState.result,status:"idle"}},trigger:revalidator.trigger}))}function updateTrigger(groupState,revalidator,queryConfig){return guardAgainstUnknownState(groupState,()=>Object(of.a)({groupState:groupState,queryConfig:queryConfig,trigger:revalidator.trigger}))}function guardAgainstUnknownState(groupState,fn){return"__rx-query-unknown"===groupState.key?empty.a:fn()}let config={retries:3,retryDelay:n=>1e3*(n+1),refetchOnWindowFocus:!0,refetchOnReconnect:!0,refetchInterval:1/0,staleTime:0,cacheTime:3e5,keepPreviousData:!1,mutator:data=>data};function getQueryConfig(){return config}function createQueryKey(key,params){return null!=params?key+"-"+(["string","number"].includes(typeof params)?params:JSON.stringify(params)):key}function mutateSuccess(key,data){revalidate.next({key:key,data:data,trigger:"mutate-success",config:getQueryConfig()})}function query_query(key,...inputs){const{query:query,queryParam:queryParam,queryConfig:queryConfig}=function parseInput(inputs){const[firstInput,secondInput,thirdInput]=inputs,hasParamInput="function"!=typeof firstInput,queryParam=hasParamInput?Object(isObservable.a)(firstInput)?firstInput:Object(of.a)(firstInput):Object(of.a)(null),query="function"==typeof firstInput?firstInput:secondInput,inputConfig=hasParamInput?thirdInput:secondInput,queryConfig={...getQueryConfig(),...inputConfig};return{query:query,queryParam:queryParam.pipe(Object(shareReplay.a)({refCount:!0,bufferSize:1})),queryConfig:queryConfig}}(inputs),retryCondition=function createRetryCondition(queryConfig){return"number"==typeof queryConfig.retries?n=>n<(queryConfig.retries||0):queryConfig.retries||(()=>!1)}(queryConfig),retryDelay=function createRetryDelay(queryConfig){return"number"==typeof queryConfig.retryDelay?()=>queryConfig.retryDelay:queryConfig.retryDelay||(()=>0)}(queryConfig),invokeQuery=(loadingStatus,queryParameters)=>{const invoke=retries=>query(queryParameters).pipe(Object(map.a)(data=>({status:"success",data:data})),Object(catchError.a)(error=>Object(of.a)({status:"error",error:error,retries:retries}))),mutateQuery=(data,updater)=>{const cacheKey=createQueryKey(key,queryParameters),mutate$=queryConfig.mutator(data,{queryParameters:queryParameters,cacheKey:cacheKey});Object(isObservable.a)(mutate$)?mutate$.pipe(Object(map.a)(newData=>()=>mutateSuccess(cacheKey,newData)),Object(take.a)(1),Object(startWith.a)(()=>function mutateOptimistic(key,data){revalidate.next({key:key,data:data,trigger:"mutate-optimistic",config:getQueryConfig()})}(cacheKey,updater||data))).subscribe({next:evt=>evt(),error:errorData=>function mutateError(key,error){revalidate.next({key:key,data:error,trigger:"mutate-error",config:getQueryConfig()})}(cacheKey,errorData)}):mutateSuccess(cacheKey,mutate$)};return Object(defer.a)(()=>invoke(0).pipe(Object(expand.a)(result=>"error"===result.status&&retryCondition(result.retries||0,result.error)?Object(timer.a)(retryDelay(result.retries||0)).pipe(Object(concatMap.a)(()=>invoke((result.retries||0)+1)),Object(startWith.a)({...result,status:loadingStatus})):empty.a),Object(debounce.a)(result=>"error"===result.status?Object(timer.a)(0):empty.a),Object(map.a)(r=>({...r,mutate:mutateQuery}))))};return Object(defer.a)(()=>{const params$=function paramsTrigger(queryConfig,queryParam,key,invokeQuery){return queryParam.pipe(Object(startWith.a)(void 0),Object(distinctUntilChanged.a)((a,b)=>JSON.stringify(a)===JSON.stringify(b)),Object(pairwise.a)(),Object(concatMap.a)(([previous,params])=>{const revalidates=[];if(void 0!==previous){const unsubscribe={key:createQueryKey(key,previous),query:invokeQuery,trigger:"query-unsubscribe",params:previous,config:queryConfig};revalidates.push(unsubscribe)}const init={key:createQueryKey(key,params),query:invokeQuery,trigger:"query-subscribe",params:params,config:queryConfig};return revalidates.push(init),revalidates}))}(queryConfig,queryParam,key,invokeQuery),focus$=function focusTrigger(queryConfig,queryParam,key,invokeQuery){return queryConfig.refetchOnWindowFocus?Object(fromEvent.a)(window,"focus").pipe(Object(withLatestFrom.a)(queryParam),Object(map.a)(([_,params])=>({key:createQueryKey(key,params),query:invokeQuery,trigger:"focus",params:params,config:queryConfig}))):never.a}(queryConfig,queryParam,key,invokeQuery),reconnect$=function reconnectTrigger(queryConfig,queryParam,key,invokeQuery){return queryConfig.refetchOnReconnect?Object(fromEvent.a)(window,"online").pipe(Object(withLatestFrom.a)(queryParam),Object(map.a)(([_,params])=>({key:createQueryKey(key,params),query:invokeQuery,trigger:"reconnect",params:params,config:queryConfig}))):never.a}(queryConfig,queryParam,key,invokeQuery),interval$=function intervalTrigger(queryConfig,queryParam,key,invokeQuery){return queryConfig.refetchInterval!==1/0?(Object(isObservable.a)(queryConfig.refetchInterval)?queryConfig.refetchInterval:Object(observable_interval.a)(queryConfig.refetchInterval)).pipe(Object(withLatestFrom.a)(queryParam),Object(map.a)(([_,params])=>({key:createQueryKey(key,params),query:invokeQuery,trigger:"interval",params:params,config:queryConfig}))):never.a}(queryConfig,queryParam,key,invokeQuery),triggersSubscription=Object(scheduled.a)([params$,focus$,reconnect$,interval$],scheduler_async.a).pipe(Object(mergeAll.a)()).subscribe({next:c=>revalidate.next(c),complete:()=>console.warn("complete")});return queryCache.pipe(Object(withLatestFrom.a)(params$),Object(map.a)(([c,k])=>c[k.key]),Object(filter.a)(v=>!!v&&!["query-unsubscribe","group-unsubscribe"].includes(v.trigger)),Object(map.a)(v=>v.groupState.result),Object(distinctUntilChanged.a)(),function patchDataWithPreviousData(keepPreviousData){let data;return source=>keepPreviousData?source.pipe(Object(map.a)(value=>void 0!==data&&void 0===value.data&&"loading"===value.status?{...value,data:data,status:"refreshing"}:(data=value.data,value))):source}(queryConfig.keepPreviousData),Object(finalize.a)(()=>{params$.pipe(Object(take.a)(1)).subscribe({next:params=>{revalidate.next({...params,trigger:"query-unsubscribe"})}}),triggersSubscription.unsubscribe()}))})}var mergeMap=__webpack_require__(52);function prefetch(key,...inputs){const{query:inputQuery,queryParam:queryParam,queryConfig:queryConfig}=function prefetch_parseInput(inputs){const[firstInput,secondInput,thirdInput]=inputs,hasParamInput="function"!=typeof firstInput,queryParam=hasParamInput?Object(isObservable.a)(firstInput)?firstInput:Object(of.a)(firstInput):Object(of.a)(null),inputConfig=hasParamInput?thirdInput:secondInput;return{query:"function"==typeof firstInput?firstInput:secondInput,queryParam:queryParam.pipe(Object(shareReplay.a)({refCount:!0,bufferSize:1})),queryConfig:inputConfig}}(inputs);queryParam.pipe(Object(mergeMap.a)(parameter=>query_query(key,parameter,inputQuery,queryConfig).pipe(Object(take.a)(1)))).subscribe()}var mapTo=__webpack_require__(376);const mapToNoopMutation=()=>source=>source.pipe(Object(mapTo.a)(NOOP_MUTATE));var basic_component_a;let basic_component_BasicComponent=class BasicComponent{constructor(http){this.http=http,this.repo$=query_query("example-basic",()=>this.http.get("https://api.github.com/repos/timdeschryver/rx-query").pipe(Object(map.a)(repo=>({name:repo.name,url:repo.html_url,owner:repo.owner.login,stars:repo.stargazers_count}))))}};var refresh_on_focus_component_a;basic_component_BasicComponent=Object(tslib_es6.a)([Object(core.Component)({selector:"example-basic",template:'\n\t\t<div\n\t\t\tclass="max-w-sm rounded overflow-hidden shadow-lg"\n\t\t\t*ngIf="repo$ | async as repo"\n\t\t>\n\t\t\t<div [ngSwitch]="repo.status">\n\t\t\t\t<div *ngSwitchDefault class="md:flex bg-white rounded-lg p-6">\n\t\t\t\t\t<div class="text-center md:text-left">\n\t\t\t\t\t\t<a class="text-lg text-blue-500" [href]="repo.data.url"\n\t\t\t\t\t\t\t>üîó {{ repo.data.name }}</a\n\t\t\t\t\t\t>\n\t\t\t\t\t\t<div class="text-gray-600">üåü {{ repo.data.stars }}</div>\n\t\t\t\t\t\t<div class="text-gray-600">üë®‚Äçüíª {{ repo.data.owner }}</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div *ngSwitchCase="\'loading\'">\n\t\t\t\t\tLoading ... {{ repo.retries ? \'( \' + repo.retries + \' )\' : \'\' }}\n\t\t\t\t</div>\n\t\t\t\t<div *ngSwitchCase="\'error\'">\n\t\t\t\t\tSomething went wrong ...\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t\t<rx-query-devtool></rx-query-devtool>\n\t'}),Object(tslib_es6.b)("design:paramtypes",["function"==typeof(basic_component_a=void 0!==fesm2015_http.a&&fesm2015_http.a)?basic_component_a:Object])],basic_component_BasicComponent);let refresh_on_focus_component_RefreshOnFocusComponent=class RefreshOnFocusComponent{constructor(http){this.http=http,this.time$=query_query("example-refresh-on-focus",()=>this.http.get("/now").pipe(Object(map.a)(utc=>({time:new Intl.DateTimeFormat("default",{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"}).format(utc.timestamp)}))),{refetchOnWindowFocus:!0})}};var cache_devtool_component_a;refresh_on_focus_component_RefreshOnFocusComponent=Object(tslib_es6.a)([Object(core.Component)({selector:"example-refresh-on-focus",template:'\n\t\t<h2 class="text-blue-700 " *ngIf="time$ | async as time">\n\t\t\t<ng-container [ngSwitch]="time.status">\n\t\t\t\t<ng-container *ngSwitchDefault>\n\t\t\t\t\t{{ time.data.time }}\n\t\t\t\t</ng-container>\n\t\t\t\t<ng-container *ngSwitchCase="\'loading\'">\n\t\t\t\t\tLoading ...\n\t\t\t\t</ng-container>\n\t\t\t\t<ng-container *ngSwitchCase="\'error\'">\n\t\t\t\t\tSomething went wrong ...\n\t\t\t\t</ng-container>\n\t\t\t</ng-container>\n\t\t</h2>\n\t\t<rx-query-devtool></rx-query-devtool>\n\t'}),Object(tslib_es6.b)("design:paramtypes",["function"==typeof(refresh_on_focus_component_a=void 0!==fesm2015_http.a&&fesm2015_http.a)?refresh_on_focus_component_a:Object])],refresh_on_focus_component_RefreshOnFocusComponent);let cache_devtool_component_RxQueryDevToolComponent=class RxQueryDevToolComponent{constructor(cdr){this.cdr=cdr,this.cache$=queryCache.pipe(Object(map.a)(c=>Object.entries(c).map(([key,value])=>({key:key,data:value.groupState.result.data,subscriptions:value.groupState.subscriptions,status:value.groupState.result.status,staleAt:value.groupState.staleAt,removeCacheAt:value.groupState.removeCacheAt,error:value.groupState.result.error,trigger:value.trigger})))),this.refresher$=Object(timer.a)(0,1e3).pipe(Object(mapTo.a)(!0),Object(tap.a)(()=>this.cdr.markForCheck()))}removeClicked(key){revalidate.next({key:key,trigger:"group-remove"})}intervalClicked(key){revalidate.next({key:key,trigger:"manual"})}getState(entry){return"success"===entry.status?(entry.staleAt||0)>Date.now()?"fresh":"stale":entry.status}logClicked(entry){console.log(entry)}};var multiple_subscribers_component_a;cache_devtool_component_RxQueryDevToolComponent=Object(tslib_es6.a)([Object(core.Component)({selector:"rx-query-devtool",template:'\n\t\t<h3 *ngIf="refresher$ | async">Rx Queries</h3>\n\t\t<div id="rx-query-devtool">\n\t\t\t<div *ngFor="let entry of cache$ | async" (click)="logClicked(entry)">\n\t\t\t\t<div [attr.data-state]="getState(entry)" class="subscriptions">\n\t\t\t\t\t{{ entry.subscriptions }}\n\t\t\t\t</div>\n\t\t\t\t<div class="key">{{ entry.key }}</div>\n\t\t\t\t<button (click)="intervalClicked(entry.key)">Refresh</button>\n\t\t\t\t<button (click)="removeClicked(entry.key)">Remove</button>\n\t\t\t</div>\n\t\t</div>\n\t',styles:["\n\t\t\t:host {\n\t\t\t\tposition: fixed;\n\t\t\t\tbottom: 0;\n\t\t\t\tleft: 0;\n\t\t\t\theight: 200px;\n\t\t\t\twidth: 100%;\n\t\t\t\tbackground: rgba(255, 255, 255, 0.5);\n\t\t\t\toverflow: auto;\n\t\t\t\tpadding: 8px;\n\t\t\t\tborder-top: 1px solid rgba(0, 0, 0, 0.2);\n\t\t\t}\n\n\t\t\t#rx-query-devtool > div {\n\t\t\t\tdisplay: grid;\n\t\t\t\tgrid-template-columns: 2rem 1fr repeat(2, auto);\n\t\t\t\tgap: 5px;\n\t\t\t\tcursor: pointer;\n\t\t\t\tline-height: 2;\n\t\t\t\tmargin-top: 3px;\n\t\t\t}\n\n\t\t\t#rx-query-devtool > div > * {\n\t\t\t\tpadding: 3px;\n\t\t\t}\n\n\t\t\t#rx-query-devtool > div:hover {\n\t\t\t\tbackground: rgba(0, 0, 0, 0.1);\n\t\t\t}\n\n\t\t\tbutton {\n\t\t\t\tpadding: 5px 8px;\n\t\t\t\tborder-radius: 8px;\n\t\t\t\tborder: 1px solid rgba(0, 0, 0, 0.5);\n\t\t\t\tbackground: rgba(255, 255, 255, 0.5);\n\t\t\t}\n\n\t\t\tbutton:hover {\n\t\t\t\tbackground: rgba(0, 0, 0, 0.2);\n\t\t\t}\n\n\t\t\t.subscriptions {\n\t\t\t\ttext-align: center;\n\t\t\t\tborder-radius: 8px;\n\t\t\t}\n\n\t\t\t.subscriptions[data-state='fresh'] {\n\t\t\t\tbackground: limegreen;\n\t\t\t}\n\n\t\t\t.subscriptions[data-state='stale'] {\n\t\t\t\tbackground: gold;\n\t\t\t}\n\n\t\t\t.subscriptions[data-state='error'] {\n\t\t\t\tbackground: crimson;\n\t\t\t}\n\n\t\t\t.subscriptions[data-state='loading'] {\n\t\t\t\tbackground: deepskyblue;\n\t\t\t}\n\n\t\t\t.subscriptions[data-state='refreshing'] {\n\t\t\t\tbackground: lightseagreen;\n\t\t\t}\n\n\t\t\t.subscriptions[data-state='mutating'] {\n\t\t\t\tbackground: blueviolet;\n\t\t\t}\n\n\t\t\t.subscriptions[data-state='mutate-error'] {\n\t\t\t\tbackground: firebrick;\n\t\t\t}\n\t\t"]}),Object(tslib_es6.b)("design:paramtypes",["function"==typeof(cache_devtool_component_a=void 0!==core.ChangeDetectorRef&&core.ChangeDetectorRef)?cache_devtool_component_a:Object])],cache_devtool_component_RxQueryDevToolComponent);let multiple_subscribers_component_MultipleSubscribersComponent=class MultipleSubscribersComponent{constructor(http){this.http=http,this.consumers=[]}addConsumer(){const q=query_query("example-multiple-subscribers",()=>this.http.get("/now").pipe(Object(map.a)(utc=>({time:new Intl.DateTimeFormat("default",{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"}).format(utc.timestamp)}))),{cacheTime:5e3});this.consumers.push(q)}removeConsumer(index){this.consumers.splice(index,1)}};var refresh_on_interval_component_a;multiple_subscribers_component_MultipleSubscribersComponent=Object(tslib_es6.a)([Object(core.Component)({selector:"example-multiple-subscribers",template:'\n\t\t<button\n\t\t\tclass="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded"\n\t\t\t(click)="addConsumer()"\n\t\t>\n\t\t\tAdd consumer\n\t\t</button>\n\t\t<div class="flex">\n\t\t\t<ng-container *ngFor="let consumer$ of consumers; let index = index">\n\t\t\t\t<div\n\t\t\t\t\tclass="flex-auto rounded shadow-lg px-4 py-2 m-2 cursor-pointer"\n\t\t\t\t\t*ngIf="consumer$ | async as consumer"\n\t\t\t\t\t(click)="removeConsumer(index)"\n\t\t\t\t>\n\t\t\t\t\t<div [ngSwitch]="consumer.status">\n\t\t\t\t\t\t<div *ngSwitchDefault class="md:flex bg-white rounded-lg p-6">\n\t\t\t\t\t\t\t<div class="text-center md:text-left">\n\t\t\t\t\t\t\t\t<h2 class="text-lg text-blue-500">\n\t\t\t\t\t\t\t\t\t{{ consumer.data.time }}\n\t\t\t\t\t\t\t\t</h2>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div *ngSwitchCase="\'loading\'">\n\t\t\t\t\t\t\tLoading ...\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div *ngSwitchCase="\'error\'">\n\t\t\t\t\t\t\tSomething went wrong ...\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</ng-container>\n\t\t</div>\n\t\t<rx-query-devtool></rx-query-devtool>\n\t',styles:["\n\t\t\t.flex {\n\t\t\t\tflex-wrap: wrap;\n\t\t\t}\n\t\t"]}),Object(tslib_es6.b)("design:paramtypes",["function"==typeof(multiple_subscribers_component_a=void 0!==fesm2015_http.a&&fesm2015_http.a)?multiple_subscribers_component_a:Object])],multiple_subscribers_component_MultipleSubscribersComponent);let refresh_on_interval_component_RefreshOnIntervalComponent=class RefreshOnIntervalComponent{constructor(http){this.http=http,this.time$=query_query("example-refresh-on-interval",()=>this.http.get("/now").pipe(Object(map.a)(utc=>({time:new Intl.DateTimeFormat("default",{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"}).format(utc.timestamp)}))),{refetchInterval:1e3})}};var error_component_a;refresh_on_interval_component_RefreshOnIntervalComponent=Object(tslib_es6.a)([Object(core.Component)({selector:"example-refresh-on-interval",template:'\n\t\t<h2 class="text-blue-700 " *ngIf="time$ | async as time">\n\t\t\t<ng-container [ngSwitch]="time.status">\n\t\t\t\t<ng-container *ngSwitchDefault>\n\t\t\t\t\t{{ time.data.time }}\n\t\t\t\t</ng-container>\n\t\t\t\t<ng-container *ngSwitchCase="\'loading\'"> Loading ... </ng-container>\n\t\t\t\t<ng-container *ngSwitchCase="\'error\'">\n\t\t\t\t\tSomething went wrong ...\n\t\t\t\t</ng-container>\n\t\t\t</ng-container>\n\t\t</h2>\n\t\t<rx-query-devtool></rx-query-devtool>\n\t'}),Object(tslib_es6.b)("design:paramtypes",["function"==typeof(refresh_on_interval_component_a=void 0!==fesm2015_http.a&&fesm2015_http.a)?refresh_on_interval_component_a:Object])],refresh_on_interval_component_RefreshOnIntervalComponent);let error_component_ErrorComponent=class ErrorComponent{constructor(http){this.http=http,this.repo$=query_query("example-error",()=>this.http.get("/error"))}};var typeahead_component_a;error_component_ErrorComponent=Object(tslib_es6.a)([Object(core.Component)({selector:"example-error",template:'\n\t\t<div\n\t\t\tclass="max-w-sm rounded overflow-hidden shadow-lg"\n\t\t\t*ngIf="repo$ | async as repo"\n\t\t>\n\t\t\t<ng-container [ngSwitch]="repo.status">\n\t\t\t\t<div *ngSwitchDefault class="bg-white rounded-lg p-6">\n\t\t\t\t\t<div class="text-center md:text-left">\n\t\t\t\t\t\t<a class="text-lg text-blue-500" [href]="repo.data.url">{{\n\t\t\t\t\t\t\trepo.data.name\n\t\t\t\t\t\t}}</a>\n\t\t\t\t\t\t<div class="text-gray-600">Stars: {{ repo.data.stars }}</div>\n\t\t\t\t\t\t<div class="text-gray-600">Owner: {{ repo.data.owner }}</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div\n\t\t\t\t\t*ngSwitchCase="\'loading\'"\n\t\t\t\t\tclass=" items-center bg-blue-500 text-white text-sm font-bold px-4 py-3"\n\t\t\t\t>\n\t\t\t\t\tLoading ... ( {{ repo.retries }} )\n\t\t\t\t</div>\n\t\t\t\t<div\n\t\t\t\t\t*ngSwitchCase="\'error\'"\n\t\t\t\t\tclass=" items-center bg-red-500 text-white text-sm font-bold px-4 py-3"\n\t\t\t\t>\n\t\t\t\t\t<p>Something went wrong ...</p>\n\t\t\t\t\t<p>{{ repo.error.status }} {{ repo.error.statusText }}</p>\n\t\t\t\t</div>\n\t\t\t</ng-container>\n\t\t</div>\n\t\t<rx-query-devtool></rx-query-devtool>\n\t'}),Object(tslib_es6.b)("design:paramtypes",["function"==typeof(error_component_a=void 0!==fesm2015_http.a&&fesm2015_http.a)?error_component_a:Object])],error_component_ErrorComponent);let typeahead_component_TypeAheadComponent=class TypeAheadComponent{constructor(http){this.http=http,this.query=new fesm2015_forms.FormControl(""),this.results$=query_query("example-typeahead",this.query.valueChanges,name=>this.http.get("/persons?name="+name))}};var prefetch_component_a;typeahead_component_TypeAheadComponent=Object(tslib_es6.a)([Object(core.Component)({selector:"example-typeahead",template:'\n\t\t<div class="w-full">\n\t\t\t<div class="bg-white shadow-md rounded px-8 pt-6 pb-8 mb-4">\n\t\t\t\t<div class="mb-4">\n\t\t\t\t\t<label class="block text-gray-700 text-sm font-bold mb-2" for="Name">\n\t\t\t\t\t\tName\n\t\t\t\t\t</label>\n\t\t\t\t\t<input\n\t\t\t\t\t\tclass="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"\n\t\t\t\t\t\tid="name"\n\t\t\t\t\t\ttype="text"\n\t\t\t\t\t\tplaceholder="Name"\n\t\t\t\t\t\t[formControl]="query"\n\t\t\t\t\t\tautocomplete="off"\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\n\t\t\t\t<ng-container *ngIf="results$ | async as result">\n\t\t\t\t\t<div [ngSwitch]="result.status">\n\t\t\t\t\t\t<ng-container *ngSwitchDefault>\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t*ngFor="let person of result.data"\n\t\t\t\t\t\t\t\tclass="bg-white rounded-lg p-6 cursor-pointer"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<div class="text-lg text-blue-500">\n\t\t\t\t\t\t\t\t\t{{ person.name }}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class="text-gray-600">üè° {{ person.address }}</div>\n\t\t\t\t\t\t\t\t<div class="text-gray-500 text-sm">\n\t\t\t\t\t\t\t\t\tüîÉ {{ person.timestamp | date: \'fullTime\' }}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t*ngIf="result.data.length === 0"\n\t\t\t\t\t\t\t\tclass="bg-white rounded-lg p-6"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tNo persons found matching that query\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</ng-container>\n\t\t\t\t\t\t<div *ngSwitchCase="\'loading\'">\n\t\t\t\t\t\t\tLoading ...\n\t\t\t\t\t\t\t{{ result.retries ? \'( \' + result.retries + \' )\' : \'\' }}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div *ngSwitchCase="\'error\'">\n\t\t\t\t\t\t\tSomething went wrong ...\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</ng-container>\n\t\t\t</div>\n\t\t</div>\n\t\t<rx-query-devtool></rx-query-devtool>\n\t'}),Object(tslib_es6.b)("design:paramtypes",["function"==typeof(typeahead_component_a=void 0!==fesm2015_http.a&&fesm2015_http.a)?typeahead_component_a:Object])],typeahead_component_TypeAheadComponent);let prefetch_component_PrefetchComponent=class PrefetchComponent{constructor(http){this.http=http,this.selectedPerson=new Subject.a,this.persons$=query_query("example-prefetch-persons",()=>this.http.get("/persons")),this.selectedPerson$=query_query("example-prefetch-person",this.selectedPerson,id=>this.http.get("/persons/"+id))}personHover(id){prefetch("example-prefetch-person",id,()=>this.http.get("/persons/"+id),{staleTime:6e4})}personClick(id){this.selectedPerson.next(id)}};prefetch_component_PrefetchComponent=Object(tslib_es6.a)([Object(core.Component)({selector:"example-prefetch",template:'\n\t\t<div class="w-full">\n\t\t\t<div class="bg-white shadow-md rounded px-8 pt-6 pb-8 mb-4">\n\t\t\t\t<ng-container *ngIf="persons$ | async as persons">\n\t\t\t\t\t<div [ngSwitch]="persons.status" class="flex">\n\t\t\t\t\t\t<ng-container *ngSwitchDefault>\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t*ngFor="let person of persons.data"\n\t\t\t\t\t\t\t\tclass="flex-1 bg-white rounded-lg p-6 cursor-pointer"\n\t\t\t\t\t\t\t\t(mouseenter)="personHover(person.id)"\n\t\t\t\t\t\t\t\t(click)="personClick(person.id)"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<div class="text-lg text-blue-500">\n\t\t\t\t\t\t\t\t\t{{ person.name }} ({{ person.id }})\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</ng-container>\n\t\t\t\t\t\t<div *ngSwitchCase="\'loading\'">\n\t\t\t\t\t\t\tLoading ...\n\t\t\t\t\t\t\t{{ persons.retries ? \'( \' + persons.retries + \' )\' : \'\' }}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div *ngSwitchCase="\'error\'">\n\t\t\t\t\t\t\tSomething went wrong ...\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</ng-container>\n\n\t\t\t\t<ng-container *ngIf="selectedPerson$ | async as selected">\n\t\t\t\t\t<div [ngSwitch]="selected.status" class="bg-blue-200 p-4">\n\t\t\t\t\t\t<div *ngSwitchDefault class="text-lg">\n\t\t\t\t\t\t\t<div class="text-blue-500">\n\t\t\t\t\t\t\t\t{{ selected.data.name }} ({{ selected.data.id }})\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="text-gray-600">üè° {{ selected.data.address }}</div>\n\t\t\t\t\t\t\t<div class="text-gray-500 text-sm">\n\t\t\t\t\t\t\t\tüîÉ {{ selected.data.timestamp | date: \'fullTime\' }}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div *ngSwitchCase="\'loading\'">\n\t\t\t\t\t\t\tLoading ...\n\t\t\t\t\t\t\t{{ selected.retries ? \'( \' + selected.retries + \' )\' : \'\' }}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div *ngSwitchCase="\'error\'">\n\t\t\t\t\t\t\tSomething went wrong ...\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</ng-container>\n\t\t\t</div>\n\t\t</div>\n\t\t<rx-query-devtool></rx-query-devtool>\n\t'}),Object(tslib_es6.b)("design:paramtypes",["function"==typeof(prefetch_component_a=void 0!==fesm2015_http.a&&fesm2015_http.a)?prefetch_component_a:Object])],prefetch_component_PrefetchComponent);var mutate_component_a,throwError=__webpack_require__(128);let mutate_component_MutateComponent=class MutateComponent{constructor(http){this.http=http,this.selectedPerson=new Subject.a,this.person$=query_query("mutate-person",1,id=>this.http.get("/persons/"+id),{mutator:(data,{queryParameters:queryParameters})=>this.http.post("/persons/"+queryParameters,data).pipe(Object(catchError.a)(err=>Object(throwError.a)(err.statusText)))})}mutate(mutate){mutate({name:["Sarah","Bob","Charlotte","Tom","Tony","Andrea","Jane","Bonnie","Abigail","Chloe"][Math.max(0,Math.round(10*Math.random())-1)],address:"updated adress"})}mutateError(mutate){mutate({name:"",address:"updated adress"})}};mutate_component_MutateComponent=Object(tslib_es6.a)([Object(core.Component)({selector:"example-mutate",template:'\n\t\t<div class="w-full">\n\t\t\t<div class="bg-white shadow-md rounded px-8 pt-6 pb-8 mb-4">\n\t\t\t\t<ng-container *ngIf="person$ | async as person">\n\t\t\t\t\t<div role="alert" *ngIf="person.status === \'mutate-error\'">\n\t\t\t\t\t\t<div class="bg-red-500 text-white font-bold rounded-t px-4 py-2">\n\t\t\t\t\t\t\tError\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclass="border border-t-0 border-red-400 rounded-b bg-red-100 px-4 py-3 text-red-700"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{{ person.error }}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div [ngSwitch]="person.status" class="p-4">\n\t\t\t\t\t\t<div *ngSwitchDefault class="text-lg">\n\t\t\t\t\t\t\t<div class="text-white-500">\n\t\t\t\t\t\t\t\t{{ person.data.name }} ({{ person.data.id }})\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="text-gray-600">üè° {{ person.data.address }}</div>\n\t\t\t\t\t\t\t<div class="text-gray-500 text-sm mb-3">\n\t\t\t\t\t\t\t\tüîÉ {{ person.data.timestamp | date: \'fullTime\' }}\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t(click)="mutate(person.mutate)"\n\t\t\t\t\t\t\t\tclass="-transparent hover:bg-blue-500 text-blue-700 font-semibold hover:text-white py-2 px-4 border border-blue-500 hover:border-transparent rounded mr-2"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tMutate\n\t\t\t\t\t\t\t</button>\n\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t(click)="mutateError(person.mutate)"\n\t\t\t\t\t\t\t\tclass="-transparent hover:bg-red-500 text-red-700 font-semibold hover:text-white py-2 px-4 border border-red-500 hover:border-transparent rounded"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tMutate with error\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div *ngSwitchCase="\'loading\'">\n\t\t\t\t\t\t\tLoading ...\n\t\t\t\t\t\t\t{{ person.retries ? \'( \' + person.retries + \' )\' : \'\' }}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div *ngSwitchCase="\'error\'">Something went wrong ...</div>\n\t\t\t\t\t</div>\n\t\t\t\t</ng-container>\n\t\t\t</div>\n\t\t</div>\n\t\t<rx-query-devtool></rx-query-devtool>\n\t'}),Object(tslib_es6.b)("design:paramtypes",["function"==typeof(mutate_component_a=void 0!==fesm2015_http.a&&fesm2015_http.a)?mutate_component_a:Object])],mutate_component_MutateComponent);var pagination_component_a,pagination_component_b,debounceTime=__webpack_require__(372);let pagination_component_PaginationComponent=class PaginationComponent{constructor(http,fb){this.http=http,this.fb=fb,this.search=this.fb.group({query:[""],status:["all"],page:[0]}),this.orders$=query_query("orders",this.search.valueChanges.pipe(Object(debounceTime.a)(100),Object(startWith.a)(this.search.value)),params=>this.http.get("/api/orders",{params:params}).pipe(Object(tap.a)({next:resp=>{}})),{keepPreviousData:!0,refetchInterval:1e4,refetchOnWindowFocus:!0})}previous(){this.search.patchValue({page:this.search.value.page-1})}next(){this.search.patchValue({page:this.search.value.page+1})}};pagination_component_PaginationComponent=Object(tslib_es6.a)([Object(core.Component)({selector:"example-pagination",template:'\n\t\t<form [formGroup]="search" class="mb-4 w-full">\n\t\t\t<input\n\t\t\t\tformControlName="query"\n\t\t\t\tclass="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"\n\t\t\t\tid="query"\n\t\t\t\ttype="text"\n\t\t\t\tautocomplete="off"\n\t\t\t\tplaceholder="Query"\n\t\t\t/>\n\t\t\t<select\n\t\t\t\tformControlName="status"\n\t\t\t\tclass="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"\n\t\t\t\tid="status"\n\t\t\t>\n\t\t\t\t<option>all</option>\n\t\t\t\t<option value="processing">processing</option>\n\t\t\t\t<option value="ready">ready</option>\n\t\t\t\t<option value="shipped">shipped</option>\n\t\t\t\t<option value="delivered">delivered</option>\n\t\t\t\t<option value="returned">returned</option>\n\t\t\t\t<option value="cancelled">cancelled</option>\n\t\t\t</select>\n\t\t</form>\n\n\t\t<ng-container *ngIf="orders$ | async as orders" [ngSwitch]="orders.status">\n\t\t\t<button\n\t\t\t\t(click)="previous()"\n\t\t\t\t[disabled]="search.value.page === 0"\n\t\t\t\tclass="bg-transparent hover:bg-blue-500 text-blue-700 font-semibold hover:text-white py-2 px-4 border border-blue-500 hover:border-transparent rounded"\n\t\t\t>\n\t\t\t\tPrevious\n\t\t\t</button>\n\t\t\t<button\n\t\t\t\t(click)="next()"\n\t\t\t\t[disabled]="orders.data?.hasMoreData !== true"\n\t\t\t\tclass="bg-transparent hover:bg-blue-500 text-blue-700 font-semibold hover:text-white py-2 px-4 border border-blue-500 hover:border-transparent rounded"\n\t\t\t>\n\t\t\t\tNext\n\t\t\t</button>\n\t\t\t<div *ngIf="orders.status === \'refreshing\'">{{ orders.status }}</div>\n\t\t\t<div>\n\t\t\t\tRefreshed at: {{ orders.data?.timestamp | date: \'yyyy-MM-dd hh:MM\' }}\n\t\t\t</div>\n\n\t\t\t<table *ngSwitchDefault class="table-auto w-full">\n\t\t\t\t<thead>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<th class="px-4 py-2">Id</th>\n\t\t\t\t\t\t<th class="px-4 py-2">Status</th>\n\t\t\t\t\t\t<th class="px-4 py-2">Customer</th>\n\t\t\t\t\t\t<th class="px-4 py-2">Date</th>\n\t\t\t\t\t</tr>\n\t\t\t\t</thead>\n\t\t\t\t<tbody>\n\t\t\t\t\t<tr\n\t\t\t\t\t\t*ngFor="let order of orders.data?.orders"\n\t\t\t\t\t\tclass=" border md:hover:bg-gray-200"\n\t\t\t\t\t>\n\t\t\t\t\t\t<td class="px-4 py-2">{{ order.id }}</td>\n\t\t\t\t\t\t<td class="px-4 py-2">{{ order.status }}</td>\n\t\t\t\t\t\t<td class="px-4 py-2">{{ order.customer }}</td>\n\t\t\t\t\t\t<td class="px-4 py-2">\n\t\t\t\t\t\t\t{{ order.date | date: \'yyyy-MM-dd hh:MM\' }}\n\t\t\t\t\t\t</td>\n\t\t\t\t\t</tr>\n\t\t\t\t</tbody>\n\t\t\t</table>\n\n\t\t\t<button\n\t\t\t\t(click)="previous()"\n\t\t\t\t[disabled]="search.value.page === 0"\n\t\t\t\tclass="bg-transparent hover:bg-blue-500 text-blue-700 font-semibold hover:text-white py-2 px-4 border border-blue-500 hover:border-transparent rounded"\n\t\t\t>\n\t\t\t\tPrevious\n\t\t\t</button>\n\t\t\t<button\n\t\t\t\t(click)="next()"\n\t\t\t\t[disabled]="orders.data?.hasMoreData !== true"\n\t\t\t\tclass="bg-transparent hover:bg-blue-500 text-blue-700 font-semibold hover:text-white py-2 px-4 border border-blue-500 hover:border-transparent rounded"\n\t\t\t>\n\t\t\t\tNext\n\t\t\t</button>\n\t\t</ng-container>\n\t'}),Object(tslib_es6.b)("design:paramtypes",["function"==typeof(pagination_component_a=void 0!==fesm2015_http.a&&fesm2015_http.a)?pagination_component_a:Object,"function"==typeof(pagination_component_b=void 0!==fesm2015_forms.FormBuilder&&fesm2015_forms.FormBuilder)?pagination_component_b:Object])],pagination_component_PaginationComponent);var todos_service_a,todo_utils=__webpack_require__(155);let TodoService=class TodoService{constructor(http){this.http=http}getTodos(){return this.http.get("/api/todos")}addTodo(todo){return this.http.post("/api/todos",todo)}updateTodo(todo){return this.http.put("/api/todos/"+todo.id,todo)}};var todos_component_a;TodoService=Object(tslib_es6.a)([Object(core.Injectable)({providedIn:"root"}),Object(tslib_es6.b)("design:paramtypes",["function"==typeof(todos_service_a=void 0!==fesm2015_http.a&&fesm2015_http.a)?todos_service_a:Object])],TodoService);let todos_component_TodosComponent=class TodosComponent{constructor(todosService){this.todosService=todosService,this.todos$=query_query("todos",()=>this.todosService.getTodos(),{refetchOnWindowFocus:!0,mutator:(mutation,options)=>"create"===mutation.type?mutation.todo.id?this.todosService.addTodo(mutation.todo).pipe(mapToNoopMutation()):this.todosService.addTodo(mutation.todo).pipe(Object(tap.a)({next:()=>{!function refreshQuery(key,paramInput){revalidate.next({key:createQueryKey(key,paramInput),trigger:"manual",config:void 0})}(options.cacheKey)}}),mapToNoopMutation()):this.todosService.updateTodo(mutation.todo)})}addTodo(mutator,input){if(!input.value)return;mutator({todo:{completed:!1,description:input.value,id:""},type:"create"},currentState=>currentState),input.value=""}addTodoOptimistic(mutator,input){if(!input.value)return;const mutation={todo:{completed:!1,description:input.value,id:Object(todo_utils.a)()},type:"create"};mutator(mutation,currentState=>[...currentState,mutation.todo]),input.value=""}updateTodo(mutator,todo){mutator({todo:{...todo,completed:!todo.completed},type:"update"},currentState=>currentState)}};todos_component_TodosComponent=Object(tslib_es6.a)([Object(core.Component)({selector:"example-list",template:'\n\t\t<ng-container *ngIf="todos$ | async as todos">\n\t\t\t<ng-container [ngSwitch]="todos.status">\n\t\t\t\t<div *ngSwitchCase="\'loading\'">Loading ... ({{ todos.retries }})</div>\n\t\t\t\t<div *ngSwitchCase="\'error\'">\n\t\t\t\t\tSomething went wrong ... ({{ todos.retries }})\n\t\t\t\t</div>\n\t\t\t\t<div *ngSwitchDefault>\n\t\t\t\t\t<ul>\n\t\t\t\t\t\t<li *ngFor="let todo of todos.data">\n\t\t\t\t\t\t\t<label>\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\ttype="checkbox"\n\t\t\t\t\t\t\t\t\t[checked]="todo.completed"\n\t\t\t\t\t\t\t\t\t(change)="updateTodo(todos.mutate, todo)"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t{{ todo.description }}\n\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t</ul>\n\t\t\t\t</div>\n\t\t\t</ng-container>\n\n\t\t\t<input\n\t\t\t\t#todo\n\t\t\t\tclass="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 mb-3 leading-tight focus:outline-none focus:shadow-outline"\n\t\t\t\tplaceholder="New todo"\n\t\t\t/>\n\n\t\t\t<div>{{ todos.status }}</div>\n\n\t\t\t<button\n\t\t\t\t(click)="addTodo(todos.mutate, todo)"\n\t\t\t\tclass="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded"\n\t\t\t>\n\t\t\t\tAdd Todo\n\t\t\t</button>\n\t\t\t<button\n\t\t\t\t(click)="addTodoOptimistic(todos.mutate, todo)"\n\t\t\t\tclass="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded"\n\t\t\t>\n\t\t\t\tAdd Todo Optimistic\n\t\t\t</button>\n\t\t</ng-container>\n\t\t<rx-query-devtool></rx-query-devtool>\n\t'}),Object(tslib_es6.b)("design:paramtypes",["function"==typeof(todos_component_a=void 0!==TodoService&&TodoService)?todos_component_a:Object])],todos_component_TodosComponent);__webpack_exports__.default={title:"rx-query",decorators:[Object(client.moduleMetadata)({imports:[fesm2015_http.b,fesm2015_forms.ReactiveFormsModule,common.a],declarations:[cache_devtool_component_RxQueryDevToolComponent]})]};const Basic=()=>({component:basic_component_BasicComponent});Basic.story={name:"Basic"};const RefreshOnInterval=()=>({component:refresh_on_interval_component_RefreshOnIntervalComponent});RefreshOnInterval.story={name:"Refresh every second"};const RefreshOnFocus=()=>({component:refresh_on_focus_component_RefreshOnFocusComponent});RefreshOnFocus.story={name:"Focus to refresh"};const MultipleSubscribers=()=>({component:multiple_subscribers_component_MultipleSubscribersComponent});MultipleSubscribers.story={name:"Multiple consumers"};const Error=()=>({component:error_component_ErrorComponent});Error.story={name:"With retry and error"};const TypeAhead=()=>({component:typeahead_component_TypeAheadComponent});TypeAhead.story={name:"Typeahead"};const Prefetch=()=>({component:prefetch_component_PrefetchComponent});Prefetch.story={name:"Prefetch"};const Mutate=()=>({component:mutate_component_MutateComponent});Mutate.story={name:"Mutate"};const Pagination=()=>({component:pagination_component_PaginationComponent});Pagination.story={name:"Pagination"};const Todos=()=>({component:todos_component_TodosComponent});Todos.story={name:"Todos"}},772:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"worker",(function(){return worker}));var esm=__webpack_require__(185),rest_deps=__webpack_require__(104);const STATUS=["processing","ready","shipped","delivered","returned","cancelled"],NAMES=["Safia Mcfarlane","Irene Mueller","Ellice Talley","Zena Prince","Fardeen Foley","Dion Bray","Tonya Storey","Misha Todd","Blanka Morley","Forrest Shaw","Christy Horne","Sebastian Clarkson","Aryaan Washington","Louis Smyth","Maliha Quinn","Amritpal Pemberton","Daniella Bernal","Freya Abbott","Kenzo Pacheco","Rojin Steele","Akbar Rigby","Kareena Buxton","Esa Dowling","Fabien Krueger","Olli Lester","Ellisha Avalos","Pola Torres","Kacy Hodge","Shae Rodriguez","Amanah Handley","Glyn Roche","Alissia Carter","Iylah Leonard","Miller Haas","Kyan Gaines","Cloe Bloom","Jamila Hatfield","Pierce Herring","Lilly-Ann Harrington","Armaan Nairn","Jamelia Bentley","Radhika Morton","Ayda Hardin","Richard Holder","Kye Hartley","Rhiannon Beattie","Nikkita Goodwin","Ivy Mccullough","Rick Smith","Isla-Grace Reyes","Siraj Dale","Jada Lyon","Farhaan Moore","Annalise Hodges","Gia Fernandez","Tony Ballard","Macauley Cunningham","Hattie Coulson","Isla-Rose Lindsay","Gracie-Mae Bowes","T-Jay Mair","Meghan Neale","Julius Knowles","Rowena Lucero","Nafisa Pham","Shannan Novak","Luis Parkes","Isabel Malone","Manal Drake","Elena Sosa","Nabilah Thompson","Indi Orozco","Eshaan Bailey","Michalina Mcdougall","Jaxson Gunn","Sharna Mooney","Aras Hebert","Isabella-Rose Conway","Jaheim Lees","Elsie-Rose Driscoll","Tamzin Sharp","Uwais Black","Saanvi Warren","Emelia Wright","Abi Hutchinson","Adriana Mata","Ameena Little","Brody Baldwin","Mica Richards","Eshan Curtis","Marnie Martinez","Rivka Mcintyre","Imaani Moses","Abigale Obrien","Ariella Love","Sofie Goulding","Amar Collier","Sabina Eastwood","Sion Wicks","Shaunna Bryan"],ORDERS=Array.from({length:100},()=>({id:"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(c){const r=16*Math.random()|0,v="x"==c?r:3&r|8;return v.toString(16)})),date:new Date(+new Date-Math.floor(1e10*Math.random())),status:STATUS[Math.floor(Math.random()*STATUS.length)],customer:NAMES[Math.floor(Math.random()*NAMES.length)]})),orderHandlers=[rest_deps.c.get("/api/orders",(req,res,ctx)=>{const query=req.url.searchParams.get("query"),status=req.url.searchParams.get("status"),page=+(req.url.searchParams.get("page")||0),pageSize=+(req.url.searchParams.get("pageSize")||10);let orders=ORDERS;query&&(orders=orders.filter(o=>o.id.toLocaleLowerCase().includes(query.toLowerCase())||o.customer.toLocaleLowerCase().includes(query.toLowerCase()))),status&&"all"!==status&&(orders=orders.filter(o=>o.status===status));const startingIndex=page*pageSize,endingIndex=(page+1)*pageSize,hasMoreData=orders.length>endingIndex;return page>=0&&(orders=orders.filter((_,i)=>startingIndex<=i&&i<endingIndex)),res(ctx.delay(),ctx.json({timestamp:+Date.now(),orders:orders,hasMoreData:hasMoreData}))})];var todo_utils=__webpack_require__(155);let todos=[{id:Object(todo_utils.a)(),completed:!1,description:"First dodo"}];const todosHandlers=[rest_deps.c.get("/api/todos",(req,res,ctx)=>res(ctx.delay(),ctx.json(todos))),rest_deps.c.post("/api/todos",(req,res,ctx)=>{const newTodo=req.body;return"error"===newTodo.description?res(ctx.delay(2e3),ctx.status(500)):(newTodo.id=newTodo.id||Object(todo_utils.a)(),todos.push(newTodo),res(ctx.delay(2e3),ctx.json(todos)))}),rest_deps.c.put("/api/todos/:id",(req,res,ctx)=>(todos=todos.map(t=>t.id===req.params.id?req.body:t),res(ctx.delay(),ctx.json(todos))))],worker=Object(esm.a)(rest_deps.c.get("/now",(req,res,ctx)=>res(ctx.delay(1e3),ctx.json({timestamp:Date.now()}))),rest_deps.c.get("/error",(req,res,ctx)=>res(ctx.status(418,"Uh-oh try again later"))),rest_deps.c.get("/persons",(req,res,ctx)=>{const name=req.url.searchParams.get("name")||"",match=new RegExp(name,"i");return res(ctx.delay(1e3),ctx.json(persons.filter(p=>match.test(p.name)).map(p=>({...p,timestamp:Date.now()}))))}),rest_deps.c.get("/persons/:id",(req,res,ctx)=>{const{id:id}=req.params,person=persons.find(p=>p.id==id);return res(ctx.delay(1e3),ctx.json({...person,timestamp:Date.now()}))}),rest_deps.c.post("/persons/:id",(req,res,ctx)=>{const{id:id}=req.params,person=persons.find(p=>p.id==id),body=req.body,result=body.name?ctx.json({...person,...body,timestamp:Date.now()}):ctx.status(500,"Name is required");return res(ctx.delay(1e3),result)}),...orderHandlers,...todosHandlers),persons=[{id:1,name:"Abbi Gardiner",address:"Street 1"},{id:2,name:"Mya Gray",address:"Street 2"},{id:3,name:"Adnan Samuels",address:"Street 3"},{id:4,name:"Jimi Ross",address:"Street 4"},{id:5,name:"Aqeel Childs",address:"Street 5"},{id:6,name:"Samson Sullivan",address:"Street 6"},{id:7,name:"Dennis Foley",address:"Street 7"},{id:8,name:"Bethanie Bradford",address:"Street 8"},{id:9,name:"Yazmin Mueller",address:"Street 9"},{id:10,name:"Demi Mccormack",address:"Street 10"}]}},[[386,1,2]]]);
//# sourceMappingURL=main.c2aaf55d5cacf137bfd1.bundle.js.map